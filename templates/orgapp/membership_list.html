{% extends 'base.html' %}

{% block title %}Членства{% endblock %}

{% block content %}
<h2>Список членств</h2>

<a href="{% url 'orgapp:membership-create' %}" class="btn btn-primary">Добавить членство</a>
<hr>

{% if memberships %}
    <table class="table">
        <thead>
            <tr>
                <th>Пользователь</th>
                <th>Организация</th>
                <th>Должность</th>
                <th>Дата вступления</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
        {% for m in memberships %}
            <tr>
                <td>{{ m.user.username }}</td>
                <td>{{ m.organization.name }}</td>
                <td>{{ m.position.title|default:"Сотрудник" }}</td>
                <td>{{ m.joined_at }}</td>
                <td>
                    <a href="{% url 'orgapp:membership-detail' m.pk %}">Просмотреть</a> |
                    <a href="{% url 'orgapp:membership-update' m.pk %}">Редактировать</a> |
                    <a href="{% url 'orgapp:membership-delete' m.pk %}">Удалить</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Нет членств.</p>
{% endif %}

{% include 'pagination.html' with page_obj=page_obj %}
{% endblock %}